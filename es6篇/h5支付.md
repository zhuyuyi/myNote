---
title: h5支付
---

## h5支付

### 需求相关

<img src="https://s2.ax1x.com/2019/08/06/efaDSJ.png" alt="efaDSJ.png" border="0" />

这次需求是 在m站中添加 微信h5支付方式，上面是涉及到的业务列表以及大致的脑图结构，其中`精准定价`和其他四个业务不使用同一个支付页。

`精准定价`支付页是`jquery`而其余四个则是 统一的`vue`。

### 支付流程

<img src="https://s2.ax1x.com/2019/08/06/efbitK.jpg" alt="efbitK.jpg" border="0" />

为什么需要重新返回支付页并弹框手动提示是否支付完成呢？

在ios端使用微信h5支付 是没有问题的，但是在android端，微信h5支付回调页面出现问题，它会先于支付操作，直接重定向到指定页面。这导致重定向的页面那时并没有支付完成，所以显示的内容还是未支付状态。

这显然不符合我们的需求。

因此，在我们多方考虑之后，都统一回到先前支付页并弹框提示，通过用户手动点击，开触发判断订单是否支付完成，并跳转。

