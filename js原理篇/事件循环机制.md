### 事件循环机制

#### 宏任务和微任务

##### 哪些属于宏任务？

* setTimeout
* setInterval
* setImmediate
* requestAnimationFrame
* I/O
* UI渲染

##### 哪些属于微任务？

* Promise
* MutationObserver
* process.nextTick
* queueMicrotask

##### 事件循环，消息队列与宏任务、微任务之间的关系是什么？

* 宏任务入队消息队列，可以将消息队列理解为宏任务队列
* 每个宏任务内有一个微任务队列，执行过程中微任务入队当前宏任务的微任务队列
* 宏任务微任务队列为空时才会执行下一个宏任务
* 事件循环捕获队列出队的宏任务和微任务并执行

事件循环会不断地处理消息队列出队的任务，而宏任务指的就是入队到消息队列中的任务，每个宏任务都有一个微任务队列，宏任务在执行过程中，如果此时产生微任务，那么会将产生的微任务入队到当前的微任务队列中，在当前宏任务的主要任务完成后，会依次出队并执行微任务队列中的任务，直到当前微任务队列为空才会进行下一个宏任务。





